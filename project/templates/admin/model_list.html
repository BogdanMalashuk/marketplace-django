{% extends "admin/base.html" %}

{% block content %}
<h2 class="mb-4">Список {{ model }}</h2>

<table class="table table-bordered table-striped">
    <thead class="table-dark">
        <tr>
            <th>ID</th>
            <th>Название</th>
            <th>Действия</th>
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td>{{ item.id }}</td>
            <td>{{ item }}</td>
            <td>
                {% if model == "ShopRequest" %}
                    {% if item.status == 'pending' %}
                        <a href="{% url 'app_admin:shoprequest_approve' item.pk %}" class="btn btn-sm btn-success">Одобрить</a>
                        <a href="{% url 'app_admin:shoprequest_reject' item.pk %}" class="btn btn-sm btn-warning">Отклонить</a>
                    {% else %}
                        {{ item.get_status_display }}<br><small>{{ item.response_time|date:"Y-m-d H:i" }}</small>
                    {% endif %}
                    <a href="{% url 'app_admin:shoprequest_delete' item.pk %}" class="btn btn-sm btn-danger">Удалить</a>
                {% elif model == "User" %}
                    <a href="{% url 'app_admin:user_update' item.pk %}" class="btn btn-sm btn-primary">Редактировать</a>
                {% else %}
                    <a href="{% url 'app_admin:'|add:model|lower|add:'_update' item.pk %}" class="btn btn-sm btn-primary">Редактировать</a>
                    <a href="{% url 'app_admin:'|add:model|lower|add:'_delete' item.pk %}" class="btn btn-sm btn-danger">Удалить</a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}

